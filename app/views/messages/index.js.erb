<% if @message.errors.any? %>
  // Render new message form with errors
  $('#messages').html("<%= j render 'messages/messages',messages: @messages %>");
<% else %>
  // Create a paragraph for the new message. But hide it.
  var messages = $("<%= j render 'messages/messages', messages: @messages %>").css("display","none");
  // Add it to the DOM, at the end of the existing messages. It's still hidden.


  $('#chat_window').empty();
  $('#chat_window').append(messages);
  messages.css("display","block");

  var d = $('#messages');
  // d.animate({ scrollTop: d.prop("scrollHeight")}, 0);
  d.scrollTop(d.prop("scrollHeight"));

  // Reset the form
//   $('#new_message').html("<%= j render 'messages/form', workshop: @workshop, message: Message.new %>");
<% end %>
